{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/lioneletaba/Documents/Projets/Perso/argrisults-app/ui/components/MapModal.tsx\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport mapboxgl from 'mapbox-gl'; // const mapboxAccessToken = process.env.MAP_ACCESS_TOKEN\n\nconst mapboxAccessToken = \"pk.eyJ1IjoiZXRhYmFsaW9uZWwiLCJhIjoiY2tobmkxcmp5MDIxcjJ1cGVtcnoxbTRnayJ9.F8FUtpO8FsYJFYhWxfAr1Q\";\n\nlet MapModal = ({\n  className,\n  updateLonLat,\n  closeModal\n}) => {\n  const {\n    0: state,\n    1: setState\n  } = useState({\n    lat: \"7.369722\",\n    lon: \"12.354722\",\n    zoom: 0.9\n  });\n  const mapContainer = useRef(null);\n\n  const handleCloseModal = e => {\n    if (e.target.id == \"containerMap\") {\n      closeModal();\n    }\n  };\n\n  useEffect(() => {\n    mapboxgl.accessToken = mapboxAccessToken;\n    console.log({\n      mapboxAccessToken,\n      mapboxaccess: mapboxgl.accessToken\n    });\n    const map = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: 'mapbox://styles/mapbox/streets-v11',\n      center: [state.lon, state.lat],\n      zoom: state.zoom\n    });\n    map.addControl(new mapboxgl.GeolocateControl({\n      positionOptions: {\n        enableHighAccuracy: true\n      },\n      trackUserLocation: true\n    }));\n    map.on('move', () => {\n      setState({\n        lon: map.getCenter().lng.toFixed(4),\n        lat: map.getCenter().lat.toFixed(4),\n        zoom: map.getZoom().toFixed(2)\n      });\n    });\n    map.on(\"click\", e => {\n      console.log(e.lngLat);\n      const {\n        lng,\n        lat\n      } = e.lngLat;\n      updateLonLat(lat, lng);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: className,\n    onClick: handleCloseModal,\n    id: \"containerMap\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"map\",\n      ref: mapContainer\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n\nMapModal = styled(MapModal).withConfig({\n  displayName: \"MapModal\",\n  componentId: \"sc-9p4ei7-0\"\n})([\"display:grid;place-items:center;width:100vw;height:100vh;background-color:rgba(0,0,0,0.8);position:absolute;top:0;left:0;#map{width:65%;height:60%;background:white;border-radius:10px;opacity:1;z-index:1;}\"]);\nexport default MapModal;","map":{"version":3,"sources":["/Users/lioneletaba/Documents/Projets/Perso/argrisults-app/ui/components/MapModal.tsx"],"names":["React","useState","useEffect","useRef","styled","mapboxgl","mapboxAccessToken","MapModal","className","updateLonLat","closeModal","state","setState","lat","lon","zoom","mapContainer","handleCloseModal","e","target","id","accessToken","console","log","mapboxaccess","map","Map","container","current","style","center","addControl","GeolocateControl","positionOptions","enableHighAccuracy","trackUserLocation","on","getCenter","lng","toFixed","getZoom","lngLat"],"mappings":"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","sourcesContent":["import React,{useState, useEffect, useRef} from 'react'\nimport styled from 'styled-components'\nimport mapboxgl from 'mapbox-gl';\n\n\n\n// const mapboxAccessToken = process.env.MAP_ACCESS_TOKEN\nconst mapboxAccessToken = \"pk.eyJ1IjoiZXRhYmFsaW9uZWwiLCJhIjoiY2tobmkxcmp5MDIxcjJ1cGVtcnoxbTRnayJ9.F8FUtpO8FsYJFYhWxfAr1Q\"\n\ninterface Props {\n  className?: string; \n  updateLonLat: any;\n  closeModal: any;\n}\n\nlet MapModal: React.FC<Props> = ({ className, updateLonLat, closeModal }) => {\n  \n\n  const [state, setState] = useState(\n    {\n      lat: \"7.369722\",\n      lon: \"12.354722\",\n      zoom: 0.9\n    })\n  const mapContainer = useRef(null)\n\n  const handleCloseModal = (e) => {\n    if (e.target.id == \"containerMap\") {\n      closeModal()\n    } \n  }\n\n\n  useEffect(() => {\n    mapboxgl.accessToken = mapboxAccessToken\n    console.log({ mapboxAccessToken, mapboxaccess: mapboxgl.accessToken})\n    const map = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: 'mapbox://styles/mapbox/streets-v11',\n      center: [state.lon, state.lat],\n      zoom: state.zoom\n    });\n    map.addControl(\n      new mapboxgl.GeolocateControl({\n        positionOptions: {\n          enableHighAccuracy: true,\n        },\n        trackUserLocation: true,\n      })\n    );\n    map.on('move', () => {\n      setState({\n        lon: map.getCenter().lng.toFixed(4),\n        lat: map.getCenter().lat.toFixed(4),\n        zoom: map.getZoom().toFixed(2)\n      });\n    });\n    map.on(\"click\", (e) => {\n      console.log(e.lngLat);\n      const { lng, lat } = e.lngLat;\n      updateLonLat(lat, lng);\n    })\n  },\n  [])\n  \n  \n  return (\n    <div className={className} onClick={handleCloseModal} id=\"containerMap\">\n      <div id=\"map\" ref={mapContainer}>\n\n      </div>\n    </div>\n  )\n}\n\n\nMapModal = styled(MapModal)`\n  display: grid;\n  place-items: center;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0,0,0,0.8);\n  /* opacity: .9; */\n\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  #map{\n    width: 65%;\n    height: 60%;\n    background: white;\n    border-radius: 10px;\n    opacity: 1;\n    z-index: 1;\n\n  }\n\n`\n\nexport default  MapModal"]},"metadata":{},"sourceType":"module"}