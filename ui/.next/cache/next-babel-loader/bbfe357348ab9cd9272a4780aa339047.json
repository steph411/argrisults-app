{"ast":null,"code":"import * as d3 from 'd3';\nexport var drawChart = function drawChart(formattedData, chartRef) {\n  var hour = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var labels = formattedData.map(function (el) {\n    return el.label;\n  });\n  var values = formattedData.map(function (el) {\n    return el.value;\n  });\n  var containerHeight = chartRef.current.clientHeight;\n  var containerWidth = chartRef.current.clientWidth;\n  console.log({\n    containerWidth: containerWidth,\n    containerHeight: containerHeight\n  });\n  var svg = d3.select(chartRef.current).append(\"svg\") // .attr(\"preserveAspectRatio\", \"xMinYMin meet\")\n  // .attr(\"viewBox\", \"0 0 300 300\")\n  .attr(\"width\", containerWidth).attr(\"height\", containerHeight).classed(\"svg-content\", true);\n  var selection = svg.selectAll(\"rect\").data(formattedData); // let yScale = d3.scaleLinear()\n  //   .domain([0, d3.max(values)])\n  //   .range([0, containerHeight - 100]);\n\n  var yScale = d3.scaleBand().domain([labels]).range([0, containerWidth]); // add axis and labels\n\n  svg.append(\"g\").attr(\"transform\", \"translate(0,250)\") // This controls the vertical position of the Axis\n  .call(d3.axisBottom(yScale)); // let xDateScale = d3.scalePoint()\n  //     .domain(labels)\n  //     .range([0, containerWidth])\n  // svg\n  //   .append(\"g\")\n  //   .attr(\"transform\", \"translate(0, 0)\")      // This controls the vertical position of the Axis\n  //   .call(d3.axisBottom(xDateScale));\n  // let y_axis = d3.axisLeft()\n  //   .scale(yScale);\n  // svg.append(\"g\")\n  //   .attr(\"transform\", \"translate(0, 0)\")\n  //   .call(y_axis);\n\n  selection.transition().duration(300).attr(\"height\", function (d) {\n    return yScale(d);\n  }).attr(\"y\", function (d) {\n    return containerHeight - yScale(d);\n  });\n  selection.enter().append(\"rect\").attr(\"x\", function (d) {\n    return yScale(d.label);\n  }).attr(\"y\", function (d) {\n    return containerHeight;\n  }).attr(\"width\", 40).attr(\"height\", 0).attr(\"fill\", \"steelblue\").transition().duration(300).attr(\"height\", function (d) {\n    return yScale(d);\n  }).attr(\"y\", function (d) {\n    return containerHeight - yScale(d);\n  });\n  selection.exit().transition().duration(300).attr(\"y\", function (d) {\n    return containerHeight;\n  }).attr(\"height\", 0).remove();\n};","map":{"version":3,"sources":["/Users/lioneletaba/Documents/Projets/Perso/argrisults-app/ui/utils/chart.ts"],"names":["d3","drawChart","formattedData","chartRef","hour","labels","map","el","label","values","value","containerHeight","current","clientHeight","containerWidth","clientWidth","console","log","svg","select","append","attr","classed","selection","selectAll","data","yScale","scaleBand","domain","range","call","axisBottom","transition","duration","d","enter","exit","remove"],"mappings":"AAAA,OAAO,KAAKA,EAAZ,MAAoB,IAApB;AAKA,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,aAAD,EAAgBC,QAAhB,EAAwC;AAAA,MAAdC,IAAc,uEAAT,IAAS;AAG/D,MAAMC,MAAM,GAAGH,aAAa,CAACI,GAAd,CAAkB,UAAAC,EAAE;AAAA,WAAIA,EAAE,CAACC,KAAP;AAAA,GAApB,CAAf;AACA,MAAMC,MAAM,GAAGP,aAAa,CAACI,GAAd,CAAkB,UAAAC,EAAE;AAAA,WAAIA,EAAE,CAACG,KAAP;AAAA,GAApB,CAAf;AACA,MAAMC,eAAe,GAAGR,QAAQ,CAACS,OAAT,CAAiBC,YAAzC;AACA,MAAMC,cAAc,GAAGX,QAAQ,CAACS,OAAT,CAAiBG,WAAxC;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY;AAACH,IAAAA,cAAc,EAAdA,cAAD;AAAiBH,IAAAA,eAAe,EAAfA;AAAjB,GAAZ;AAEA,MAAIO,GAAG,GAAGlB,EAAE,CAACmB,MAAH,CAAUhB,QAAQ,CAACS,OAAnB,EACPQ,MADO,CACA,KADA,EAER;AACA;AAHQ,GAIPC,IAJO,CAIF,OAJE,EAIOP,cAJP,EAKPO,IALO,CAKF,QALE,EAKQV,eALR,EAMPW,OANO,CAMC,aAND,EAMgB,IANhB,CAAV;AAQA,MAAIC,SAAS,GAAGL,GAAG,CAACM,SAAJ,CAAc,MAAd,EAAsBC,IAAtB,CAA2BvB,aAA3B,CAAhB,CAjB+D,CAkB/D;AACA;AACA;;AAEA,MAAIwB,MAAM,GAAG1B,EAAE,CAAC2B,SAAH,GACVC,MADU,CACH,CAACvB,MAAD,CADG,EAEVwB,KAFU,CAEJ,CAAC,CAAD,EAAIf,cAAJ,CAFI,CAAb,CAtB+D,CA0B/D;;AACAI,EAAAA,GAAG,CACAE,MADH,CACU,GADV,EAEGC,IAFH,CAEQ,WAFR,EAEqB,kBAFrB,EAE8C;AAF9C,GAGGS,IAHH,CAGQ9B,EAAE,CAAC+B,UAAH,CAAcL,MAAd,CAHR,EA3B+D,CAiC/D;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;;AAEAH,EAAAA,SAAS,CACRS,UADD,GACcC,QADd,CACuB,GADvB,EAEKZ,IAFL,CAEU,QAFV,EAEoB,UAACa,CAAD;AAAA,WAAOR,MAAM,CAACQ,CAAD,CAAb;AAAA,GAFpB,EAGKb,IAHL,CAGU,GAHV,EAGe,UAACa,CAAD;AAAA,WAAOvB,eAAe,GAAGe,MAAM,CAACQ,CAAD,CAA/B;AAAA,GAHf;AAKAX,EAAAA,SAAS,CACNY,KADH,GAEGf,MAFH,CAEU,MAFV,EAGGC,IAHH,CAGQ,GAHR,EAGY,UAACa,CAAD;AAAA,WAAOR,MAAM,CAACQ,CAAC,CAAC1B,KAAH,CAAb;AAAA,GAHZ,EAIGa,IAJH,CAIQ,GAJR,EAIa,UAACa,CAAD;AAAA,WAAOvB,eAAP;AAAA,GAJb,EAKGU,IALH,CAKQ,OALR,EAKiB,EALjB,EAMGA,IANH,CAMQ,QANR,EAMkB,CANlB,EAOGA,IAPH,CAOQ,MAPR,EAOgB,WAPhB,EAQGW,UARH,GAQgBC,QARhB,CAQyB,GARzB,EASGZ,IATH,CASQ,QATR,EASkB,UAACa,CAAD;AAAA,WAAOR,MAAM,CAACQ,CAAD,CAAb;AAAA,GATlB,EAUGb,IAVH,CAUQ,GAVR,EAUa,UAACa,CAAD;AAAA,WAAOvB,eAAe,GAAGe,MAAM,CAACQ,CAAD,CAA/B;AAAA,GAVb;AAaAX,EAAAA,SAAS,CACNa,IADH,GAEGJ,UAFH,GAEgBC,QAFhB,CAEyB,GAFzB,EAGOZ,IAHP,CAGY,GAHZ,EAGiB,UAACa,CAAD;AAAA,WAAOvB,eAAP;AAAA,GAHjB,EAIOU,IAJP,CAIY,QAJZ,EAIsB,CAJtB,EAKGgB,MALH;AAOD,CAzEM","sourcesContent":["import * as d3 from 'd3'\n\n\n\n\nexport const drawChart = (formattedData, chartRef, hour=true) => {\n  \n  \n  const labels = formattedData.map(el => el.label)\n  const values = formattedData.map(el => el.value)\n  const containerHeight = chartRef.current.clientHeight\n  const containerWidth = chartRef.current.clientWidth\n  console.log({containerWidth, containerHeight})\n  \n  let svg = d3.select(chartRef.current)\n    .append(\"svg\")\n    // .attr(\"preserveAspectRatio\", \"xMinYMin meet\")\n    // .attr(\"viewBox\", \"0 0 300 300\")\n    .attr(\"width\", containerWidth)\n    .attr(\"height\", containerHeight)\n    .classed(\"svg-content\", true)  \n  \n  let selection = svg.selectAll(\"rect\").data(formattedData);\n  // let yScale = d3.scaleLinear()\n  //   .domain([0, d3.max(values)])\n  //   .range([0, containerHeight - 100]);\n \n  let yScale = d3.scaleBand()\n    .domain([labels])\n    .range([0, containerWidth]);\n \n  // add axis and labels\n  svg\n    .append(\"g\")\n    .attr(\"transform\", \"translate(0,250)\")      // This controls the vertical position of the Axis\n    .call(d3.axisBottom(yScale));\n\n\n  // let xDateScale = d3.scalePoint()\n  //     .domain(labels)\n  //     .range([0, containerWidth])\n  // svg\n  //   .append(\"g\")\n  //   .attr(\"transform\", \"translate(0, 0)\")      // This controls the vertical position of the Axis\n  //   .call(d3.axisBottom(xDateScale));\n  \n  // let y_axis = d3.axisLeft()\n  //   .scale(yScale);\n\n  // svg.append(\"g\")\n  //   .attr(\"transform\", \"translate(0, 0)\")\n  //   .call(y_axis);\n  \n  selection\n  .transition().duration(300)\n      .attr(\"height\", (d) => yScale(d))\n      .attr(\"y\", (d) => containerHeight - yScale(d))\n  \n  selection\n    .enter()\n    .append(\"rect\")\n    .attr(\"x\",(d) => yScale(d.label))\n    .attr(\"y\", (d) => containerHeight)\n    .attr(\"width\", 40)\n    .attr(\"height\", 0)\n    .attr(\"fill\", \"steelblue\")\n    .transition().duration(300)\n    .attr(\"height\", (d) => yScale(d))\n    .attr(\"y\", (d) => containerHeight - yScale(d))\n  \n\n  selection\n    .exit()\n    .transition().duration(300)\n        .attr(\"y\", (d) => containerHeight)\n        .attr(\"height\", 0)\n    .remove()\n\n}"]},"metadata":{},"sourceType":"module"}